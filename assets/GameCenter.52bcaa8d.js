var G=Object.defineProperty;var y=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var I=(e,t,s)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,b=(e,t)=>{for(var s in t||(t={}))k.call(t,s)&&I(e,s,t[s]);if(y)for(var s of y(t))C.call(t,s)&&I(e,s,t[s]);return e};import{_,a as A}from"./index.c5f46141.js";import{A as N}from"./AnimNum.5474aaca.js";import{r as h,o as c,c as u,a,b as d,n as x,t as g,F as v,f as w,u as V,y as P,A as S}from"./vendor.3b2a839d.js";/* empty css                   */const j={emits:["changed","click-post","update:modelValue"],props:{games:{type:Array,default:()=>[]},modelValue:Number,interval:{default:()=>4e4}},watch:{games(e){this.switchPoster(e[0].pics[0])},modelValue(e){this.curIdx=e,this.switchPoster(this.curItem().pics[0])}},data(){return{curIdx:this.modelValue||0,curPoster:"",timer:null,isswitch:!1,pause:!1}},mounted(){this.start()},unmounted(){this.release()},methods:{start(){this.timer=setInterval(()=>{this.pause||this.curIdx+1<this.games.length&&(this.curIdx++,this.$emit("update:modelValue",this.curIdx,this.curIdx-1))},this.interval)},release(){clearInterval(this.timer),this.timer=null},onHover(){this.pause=!0},onOutHover(){this.pause=!1},switchPoster(e){this.isswitch=!0,setTimeout(()=>{this.curPoster=e,this.isswitch=!1},100)},curItem(){return this.games[this.curIdx]||{name:"",pics:[""]}}},components:{AnimNum:N}},B=e=>(P("data-v-d10179ce"),e=e(),S(),e),H={style:{"box-shadow":"5px 0px 15px #000",height:"353px"}},M={style:{width:"33%"},class:"space-y-4"},F=B(()=>a("span",{class:"text-base"},"\u5A92\u4F53\u8BC4\u5206:",-1));function O(e,t,s,p,r,i){const o=h("el-image"),m=h("AnimNum");return c(),u("div",{class:"flex justify-center items-center bg-light-dark bg-opacity-50 pr-4",onMouseover:t[1]||(t[1]=(...n)=>i.onHover&&i.onHover(...n)),onMouseout:t[2]||(t[2]=(...n)=>i.onOutHover&&i.onOutHover(...n))},[a("div",H,[d(o,{class:x([r.isswitch?"opacity-0":"opacity-100","duration-150 transition-opacity ease-out"]),style:{width:"616px",height:"353px"},fit:"fill",src:r.curPoster},null,8,["class","src"])]),a("div",M,[a("div",{class:x(["text-left text-xl text-dark-white px-3 py-2",r.isswitch?"fade-in":""])},g(i.curItem().name),3),a("div",{class:x(["grid grid-rows-2 grid-flow-col gap-3",r.isswitch?"fade-in":""])},[(c(!0),u(v,null,w(i.curItem().pics,(n,l)=>(c(),V(o,{class:"opacity-50 hover:opacity-100 shadow-inner",key:l,src:n,onMouseover:f=>i.switchPoster(n,l)},null,8,["src","onMouseover"]))),128))],2),a("div",{class:x(["text-dark-white space-x-2",r.isswitch?"fade-in":""])},[F,d(m,{class:"font-semibold text-xl antialiased",value:i.curItem().mediaScore,duration:300,formatValue:n=>n.toFixed(1)},null,8,["value","formatValue"])],2),a("button",{class:x([r.isswitch?"fade-in":"","bg-primary-red text-white px-5 rounded-3xl text-sm py-2 shadow hover:opacity-80 active:scale-95 transform transition-all"]),onClick:t[0]||(t[0]=n=>e.$router.push(`/gamedetail?id=${i.curItem().id}`))}," \u7ACB\u5373\u67E5\u770B ",2)])],32)}var D=_(j,[["render",O],["__scopeId","data-v-d10179ce"]]);const E={emits:["update:modelValue"],props:{games:{default:()=>[]},maxNum:{default:()=>3},modelValue:Number},watch:{games(e){this.gameArr=e,this.gamesInit()},modelValue(e,t){this.setCurrentIndex(e,t)}},data(){return{currentIndex:this.modelValue||0,gameArr:this.games,exArr:[]}},mounted(){this.gamesInit()},methods:{gamesInit(){let e=this.gameArr.length%this.maxNum;this.exArr=this.gameArr.splice(this.gameArr.length-e,e)},switchGames(e,t){let s=e/this.maxNum,p=this.$refs.container.clientWidth+10,r=p*s;console.log(`next=${e},rate=${s},width=${p},go=${r}`),[...this.$refs.container.children].forEach((i,o)=>{e>t?i.style.transform=`translateX(-${r}px)`:i.style.transform=`translateX(-${r}px)`})},setCurrentIndex(e,t){this.currentIndex=e,this.switchGames(e,t)},pre(){this.currentIndex>=this.maxNum&&this.setCurrentIndex(this.currentIndex-this.maxNum,this.currentIndex),console.log(this.currentIndex)},next(){this.currentIndex<this.gameArr.length-this.maxNum&&this.setCurrentIndex(this.currentIndex+this.maxNum,this.currentIndex),console.log(this.currentIndex)}}},X={class:"w-full mx-auto overflow-hidden space-x-4 whitespace-nowrap",ref:"container"},z={class:"rounded-b-lg absolute left-0 bottom-0 w-full bg-gradient-to-t from-primary-black via-light-dark flex justify-between items-center"},L={class:"m-2 text-left space-y-2",style:{"max-width":"70%"}},T={class:"hidden-wrap text-dark-white font-semibold text-s2b",style:{"text-shadow":"2px 2px 5px #000"}},U={class:"hidden-wrap text-xs text-primary-gray"},W={class:"text-lg font-semibold text-white bg-primary-red px-2 rounded-3xl mr-4"};function q(e,t,s,p,r,i){const o=h("el-image");return c(),u("div",X,[(c(!0),u(v,null,w(r.gameArr,(m,n)=>(c(),u("div",{key:"image"+n,class:"rounded-lg relative pt-2 px-1 inline-block transition-transform duration-300 ease-in",style:{"max-width":"32%",height:"360px"}},[d(o,{class:"h-full rounded-lg opacity-80 cursor-pointer hover:opacity-100 transition-opacity duration-200",fit:"cover",src:m.pics[0],style:{"box-shadow":"3px 5px 10px #000"},onClick:l=>e.$router.push(`/gamedetail?id=${m.id}`)},null,8,["src","onClick"]),a("div",z,[a("div",L,[a("div",T,g(m.name),1),a("div",U,g(m.desc),1)]),a("div",W,g(m.mediaScore),1)])]))),128))],512)}var J=_(E,[["render",q]]);const K={props:{direc:{default:()=>"left"}},computed:{btnClass(){return this.direc=="left"?"bg-gradient-to-r trans-l":"bg-gradient-to-l trans-r"}}};function Q(e,t,s,p,r,i){const o=h("font-awesome-icon");return c(),u("button",{class:x(["switch-guide",i.btnClass])},[d(o,{icon:`chevron-${s.direc}`},null,8,["icon"])],2)}var R=_(K,[["render",Q],["__scopeId","data-v-f2af4622"]]);const Y={components:{GamesGuide:D,GameCardPanel:J,SwitchButton:R},data(){return{hotGames:[],gameIdx:0,panels:[{title:"",games:[]}]}},mounted(){this.hotGames=A.getGameDataAll();let e={};e.title="\u72EC\u7ACB\u6E38\u620F\u63A8\u8350",e.games=[...this.hotGames,...this.hotGames,...this.hotGames].slice(0,10),this.panels[0]=b({},e),e.title="\u4EBA\u6C14\u6E38\u73A9\u63A8\u8350",this.panels[1]=e},methods:{switchGame(e){e>0&&this.gameIdx+e<this.hotGames.length?this.gameIdx+=e:e<0&&this.gameIdx+e>=0&&(this.gameIdx+=e)},swithPanel(e,t){let s=this.$refs["gp-"+e];t>0?s.next():s.pre()}}},Z={class:"w-7/10 mx-auto my-10 space-y-10"},ee={class:"flex justify-center items-center w-full"},te={class:"subtitle"},se={class:"flex justify-around items-center"};function ie(e,t,s,p,r,i){const o=h("SwitchButton"),m=h("GamesGuide"),n=h("GameCardPanel");return c(),u("div",Z,[a("div",ee,[d(o,{direc:"left",onClick:t[0]||(t[0]=l=>i.switchGame(-1))}),d(m,{modelValue:r.gameIdx,"onUpdate:modelValue":t[1]||(t[1]=l=>r.gameIdx=l),style:{width:"940px",height:"353px"},class:"shadow-sm",games:r.hotGames},null,8,["modelValue","games"]),d(o,{direc:"right",onClick:t[2]||(t[2]=l=>i.switchGame(1))})]),(c(!0),u(v,null,w(r.panels,(l,f)=>(c(),u("div",{key:f,class:"space-y-8 mx-auto",style:{width:"82%"}},[a("div",te,g(l.title),1),a("div",se,[d(o,{direc:"left",onClick:$=>i.swithPanel(f,-1)},null,8,["onClick"]),d(n,{ref:`gp-${f}`,games:l.games},null,8,["games"]),d(o,{direc:"right",onClick:$=>i.swithPanel(f,1)},null,8,["onClick"])])]))),128))])}var ce=_(Y,[["render",ie]]);export{ce as default};
