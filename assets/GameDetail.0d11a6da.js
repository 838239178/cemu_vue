var $=Object.defineProperty,z=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var P=(t,o,s)=>o in t?$(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s,F=(t,o)=>{for(var s in o||(o={}))N.call(o,s)&&P(t,s,o[s]);if(B)for(var s of B(o))L.call(o,s)&&P(t,s,o[s]);return t},O=(t,o)=>z(t,A(o));import{_ as w,a as g}from"./index.43bf9f0d.js";import{r as l,o as d,c as p,a as e,t as m,b as n,d as u,g as v,F as V,f as D,u as U,y as j,A as G,n as y,w as q,e as E}from"./vendor.3b2a839d.js";import{A as H}from"./AnimNum.c2568594.js";const R={props:["data"]},Q={class:"text-left text-gray-200"},J=e("div",{class:"text-sm font-bold"},"\u6E38\u620F\u7B80\u4ECB:",-1),K={class:"wrap-text text-sm text-primary-gray leading-6 mt-2 mb-5 m",style:{"min-height":"5rem"}};function W(t,o,s,S,a,r){const c=l("el-descriptions-item"),h=l("el-tag"),b=l("el-descriptions");return d(),p("div",Q,[J,e("div",K,m(s.data.desc),1),n(b,{column:1,direction:"horizontal"},{default:u(()=>[n(c,{span:2,label:"\u53D1\u884C\u65E5\u671F:","label-class-name":"font-bold text-gray-200","class-name":"text-primary-gray underline"},{default:u(()=>[v(m(s.data.date),1)]),_:1}),n(c,{label:"\u51FA\u7248\u5546:",span:2,"label-class-name":"font-bold text-gray-200","class-name":"text-primary-gray underline"},{default:u(()=>[v(m(s.data.deployer),1)]),_:1}),n(c,{label:"\u53D1\u884C\u5546:",span:2,"label-class-name":"font-bold text-gray-200","class-name":"text-primary-gray underline"},{default:u(()=>[v(m(s.data.publisher),1)]),_:1}),n(c,{label:"\u6E38\u620F\u6807\u7B7E:",span:2,"label-class-name":"font-bold text-gray-200 ","class-name":"space-x-2"},{default:u(()=>[(d(!0),p(V,null,D(s.data.tags,_=>(d(),U(h,{key:_,color:"#BF1313",class:"text-gray-200 border-red-700",size:"mini"},{default:u(()=>[v(m(_),1)]),_:2},1024))),128))]),_:1})]),_:1})])}var X=w(R,[["render",W]]);const Y={props:["mediaScore","publicScore"]},Z=t=>(j("data-v-5c7301eb"),t=t(),G(),t),ee={class:"w-fit space-y-1"},te={class:"flex justify-between items-center w-80 h-32"},se={class:"bg-pub-score score"},oe={class:"bg-media-score score"},ne=Z(()=>e("div",{class:"flex justify-between items-center"},[e("span",{class:"score-title"},"\u5A92\u4F53\u603B\u8BC4"),e("span",{class:"score-title"},"\u73A9\u5BB6\u603B\u8BC4")],-1));function ae(t,o,s,S,a,r){const c=l("el-divider");return d(),p("div",ee,[e("div",te,[e("div",se,m(s.mediaScore),1),n(c,{direction:"vertical","content-position":"center",class:"h-36 bg-primary-gray"}),e("div",oe,m(s.publicScore),1)]),ne])}var le=w(Y,[["render",ae],["__scopeId","data-v-5c7301eb"]]);const ie={components:{AnimNum:H},emits:["thumbs-up","thumbs-down"],props:{comment:{default:()=>({id:8,gameId:2,score:6,username:"Qin",avatar:"https://media.st.dl.pinyuncloud.com/steamcommunity/public/images/avatars/9b/9b0d4b5213c802759546e82adf1d5fa8d9d2f6a8.jpg",content:"\u5982\u679C\u4F60\u60F3\u73A9\u7684\u591F\u723D\uFF0C\u9009\u5730\u5E73\u7EBF\u3002\u5982\u679C\u4F60\u60F3\u82B1\u91CC\u80E1\u54E8\uFF0C\u9009\u5730\u5E73\u7EBF\u3002\u5982\u679C\u4F60\u60F3\u6539\u88C5\u8C03\u6821\uFF0C\u9009\u5730\u5E73\u7EBF\u3002\u5982\u679C\u4F60\u60F3\u95EA\u9000\u6389\u7EBF\uFF0C\u9009\u5730\u5E73\u7EBF",thumbsUp:25,thumbsDown:1,date:"2021/11/09 13:01",state:0})},imgUnit:{default:()=>16},enableMinH:{default:()=>!0}},computed:{rate(){let t=(this.comment.score/2).toFixed(1);return console.log(this.comment.score),console.log(t),t}},methods:{setThumbs(t){t==-1?this.$emit("thumbs-down",this.comment.thumbsDown+1,t):this.$emit("thumbs-up",this.comment.thumbsUp+1,t)},formatThumbs(t){return`(${t})`}}},me=t=>(j("data-v-d0cd111e"),t=t(),G(),t),ce={class:"h-full px-2 rounded-md"},re={class:"my-11 font-bold text-left text-sm"},de={class:"font-bold text-sm"},ue={class:"px-1 pb-2 wrap-text text-dark-white text-sm"},_e=me(()=>e("div",{class:"text-sm font-bold"},"\u4F60\u89C9\u5F97\u8FD9\u7BC7\u8BC4\u8BBA\u6709\u4EF7\u503C\u5417?",-1)),he={class:"float-left space-x-8 text-2xl mx-2"};function pe(t,o,s,S,a,r){const c=l("el-image"),h=l("el-col"),b=l("el-rate"),_=l("font-awesome-icon"),k=l("anim-num"),T=l("el-row");return d(),p("div",ce,[n(T,{align:"top",justify:"space-between"},{default:u(()=>[n(h,{span:4,offset:0},{default:u(()=>[n(c,{class:y([[`w-${s.imgUnit}`,`h-${s.imgUnit}`],"mx-auto my-10"]),style:{"box-shadow":"2px 2px 5px #171a21"},src:s.comment.avatar},null,8,["class","src"])]),_:1}),n(h,{span:3},{default:u(()=>[e("div",re,m(s.comment.username),1)]),_:1}),n(h,{span:17,class:"space-y-3 text-left px-4 py-6"},{default:u(()=>[n(b,{class:"text-base comment-rate",modelValue:r.rate,"onUpdate:modelValue":o[0]||(o[0]=I=>r.rate=I),disabled:"","allow-half":""},null,8,["modelValue"]),e("div",de,"\u53D1\u5E03\u4E8E "+m(s.comment.date),1),e("div",{class:y([s.enableMinH?"min-h-1/2":"","border-b-2 border-primary-gray"])},[e("div",ue,m(s.comment.content),1)],2),_e,e("div",he,[e("span",null,[e("button",{class:y(["border-none bg-none p-0 m-0",{"text-primary-red":s.comment.state==1}]),onClick:o[1]||(o[1]=()=>r.setThumbs(1))},[n(_,{class:"thumbs",icon:"thumbs-up"})],2),n(k,{class:"text-sm mx-1",value:s.comment.thumbsUp,round:1,formatValue:r.formatThumbs,duration:300,delay:30},null,8,["value","formatValue"])]),e("span",null,[e("button",{class:y(["border-none bg-none p-0 m-0",{"text-primary-red":s.comment.state==-1}]),onClick:o[2]||(o[2]=()=>r.setThumbs(-1))},[n(_,{class:"thumbs",icon:"thumbs-down"})],2),n(k,{class:"text-sm mx-1",value:s.comment.thumbsDown,round:1,formatValue:r.formatThumbs,duration:300,delay:30},null,8,["value","formatValue"])])])]),_:1})]),_:1})])}var be=w(ie,[["render",pe],["__scopeId","data-v-d0cd111e"]]);const ve={emits:["send","update:modelValue"],props:{modelValue:Object,disable:{type:Boolean,default:()=>!1},bgClass:{default:()=>"bg-gradient-to-r from-light-dark to-primary-black bg-opacity-60"},user:{default:()=>({username:"LikeGhost",avatar:"https://avatars.githubusercontent.com/u/55338151?v=4"})}},watch:{modelValue(t){this.comment=t}},mounted(){this.comment.score=(this.comment.score/2).toFixed(1)},data(){return{comment:this.modelValue||{}}}},fe=t=>(j("data-v-757eae40"),t=t(),G(),t),xe={class:"rounded"},ge={class:"mt-5 text-primary-gray font-semibold"},ye={class:"w-7/10"},we={class:"text-xs text-gray-500 mb-2 text-left"},Ce={class:"flex justify-between items-end mt-5"},Se=fe(()=>e("div",{class:"text-left text-xs text-gray-500 my-2"}," \u60A8\u5BF9\u8FD9\u6B3E\u6E38\u620F\u7684\u8BC4\u5206\u662F? ",-1));function ke(t,o,s,S,a,r){const c=l("el-image"),h=l("el-input"),b=l("el-rate");return d(),p("div",{class:y(["w-full px-10 pt-10 pb-3 flex justify-around items-start my-10 rounded-2xl shadow-inner",s.bgClass])},[e("div",xe,[n(c,{class:"w-32 h-32 rounded",style:{"box-shadow":"2px 2px 5px #171a21"},fit:"fill",src:s.user.avatar},null,8,["src"]),e("div",ge,m(s.user.username),1)]),e("div",ye,[e("div",we,m(s.disable?`\u60A8\u5728 ${a.comment.date} \u8BC4\u4EF7\u4E86\u8FD9\u6B3E\u6E38\u620F`:"\u8BF7\u60A8\u63CF\u8FF0\u60A8\u5BF9\u8FD9\u6B3E\u6E38\u620F\u7684\u770B\u6CD5\uFF0C\u60A8\u7684\u53D1\u8A00\u9700\u8981\u9075\u5FAA\u793E\u533A\u89C4\u8303\uFF0C\u8BF7\u6CE8\u610F\u793C\u8C8C\u7528\u8BED"),1),n(h,{type:"textarea",disabled:s.disable,modelValue:a.comment.content,"onUpdate:modelValue":o[0]||(o[0]=_=>a.comment.content=_),class:"comment-sender",autosize:{minRows:6,maxRows:8}},null,8,["disabled","modelValue"]),e("div",Ce,[e("div",null,[Se,n(b,{class:"comment-rate",modelValue:a.comment.score,"onUpdate:modelValue":o[1]||(o[1]=_=>a.comment.score=_),disabled:s.disable,"allow-half":"",colors:["#BF1313","#BF1313","#BF1313"]},null,8,["modelValue","disabled"])]),q(e("button",{class:"base-btn rounded-md my-3 h-fit",onClick:o[2]||(o[2]=_=>t.$emit("send",this.comment))},"\u53D1\u8868\u8BC4\u4EF7",512),[[E,!s.disable]])])])],2)}var Ve=w(ve,[["render",ke],["__scopeId","data-v-757eae40"]]);const De={components:{DetailPanel:X,ScorePanel:le,GameComment:be,CommentSender:Ve},data(){return{game:{pics:[]},eval:{},evalContent:{},devMsg:{},devMsgContent:{},newestComments:[],hotComments:[],devOpen:!1,comment:{},commentState:!1}},mounted(){this.$route.query.id&&this.getGame(this.$route.query.id),this.eval=g.getGameEvalByGame(2),this.evalContent=g.getPostContent(this.eval.postId),this.devMsg=g.getDeveloperMessage(2),this.devMsgContent=g.getPostContent(this.devMsg.postId),this.newestComments=g.getGameComments(2).slice(4),this.hotComments=g.getGameComments(2).sort((t,o)=>o.thumbsUp-t.thumbsUp).slice(0,4)},methods:{getGame(t){this.game=g.getGameDateById(t)},onCarouselChange(t){this.$refs.gVideo.pause()},openDevMsg(){this.devOpen=!this.devOpen},sendComment(t){this.commentState=!0,this.comment=O(F({},t),{thumbsUp:0,thumbsDown:0,username:"LikeGhost",avatar:"https://avatars.githubusercontent.com/u/55338151?v=4",date:"2021/12/06"}),this.comment.score=this.comment.score*2,this.newestComments.splice(0,0,this.comment),this.newestComments.pop()}}},C=t=>(j("data-v-79aefe59"),t=t(),G(),t),Ue={class:"mx-auto pt-8 mb-10 w-7/10"},je={class:"flex justify-between items-baseline w-full"},Ge={class:"text-left text-3xl text-gray-200 font-bold leading-10 my-8",style:{"text-shadow":"10px 10px 20px black"}},Te=v(" \u8FDB\u5165\u8BBA\u575B "),Ie={class:"flex justify-between items-center w-full"},Me={style:{height:"337px",width:"600px"}},Be=["src","poster"],Pe={style:{height:"337px",width:"674px"},class:"flex justify-around items-center space-x-6"},Fe={class:"flex justify-between items-center w-full"},Oe={style:{width:"600px"},class:"space-y-8"},$e=C(()=>e("div",{class:"subtitle"},"\u5173\u4E8E\u8FD9\u6B3E\u6E38\u620F",-1)),ze={class:"absolute left-0 bottom-0 w-full text-center bg-gradient-to-t from-primary-black to-transparent"},Ae={style:{width:"674px"},class:"space-y-8"},Ne=C(()=>e("div",{class:"subtitle"},"\u5A92\u4F53\u8BC4\u4EF7",-1)),Le={class:"flex justify-start items-center space-x-4"},qe={class:"text-sm text-dark-white"},Ee={class:"relative text-primary-gray w-full mt-4 wrap-text text-left",style:{"max-height":"6rem"}},He=C(()=>e("div",{class:"absolute left-0 bottom-0 w-full text-center bg-gradient-to-t from-primary-black to-transparent h-3"},null,-1)),Re={class:"w-full text-right text-sm text-primary-gray mt-1 hover:text-white transition duration-200 cursor-pointer"},Qe=v(" \u9605\u8BFB\u66F4\u591A.. "),Je={class:"flex justify-between items-start w-full mt-6"},Ke={class:"space-y-8",style:{width:"759px"}},We=C(()=>e("div",{class:"subtitle"},"\u6700\u6709\u4EF7\u503C\u7684\u8BC4\u8BBA",-1)),Xe={class:"space-y-8",style:{width:"520px"}},Ye=C(()=>e("div",{class:"subtitle"},"\u6700\u65B0\u8BC4\u8BBA",-1));function Ze(t,o,s,S,a,r){const c=l("font-awesome-icon"),h=l("el-carousel-item"),b=l("el-image"),_=l("el-carousel"),k=l("ScorePanel"),T=l("DetailPanel"),I=l("CommentSender"),M=l("GameComment");return d(),p("div",Ue,[e("div",je,[e("div",Ge,m(a.game.name),1),e("div",{class:"text-s2b font-semibold active:text-sm text-dark-white cursor-pointer hover:text-primary-red transition duration-200 bg-light-dark bg-opacity-40 px-4 py-2 rounded-2xl",onClick:o[0]||(o[0]=i=>t.$router.push(`/community?id=${a.game.id}`))},[Te,n(c,{class:"text-primary-red",icon:"chevron-right"})])]),e("div",Ie,[e("div",Me,[n(_,{class:"shadow-lg","indicator-position":"outside",interval:15e3,onChange:r.onCarouselChange},{default:u(()=>[n(h,null,{default:u(()=>[e("video",{class:"w-full h-full",ref:"gVideo",controls:"",muted:"",src:a.game.media,poster:a.game.pics[0]},null,8,Be)]),_:1}),(d(!0),p(V,null,D(a.game.pics.slice(1),i=>(d(),U(h,{key:i},{default:u(()=>[n(b,{src:i,fit:"contain",lazy:!1},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["onChange"])]),e("div",Pe,[n(k,{mediaScore:a.game.mediaScore,publicScore:a.game.publicScore},null,8,["mediaScore","publicScore"]),n(T,{data:a.game},null,8,["data"])])]),e("div",Fe,[e("div",Oe,[$e,e("div",{class:y([a.devOpen?"devOpen":"devClose","relative w-full wrap-text text-primary-gray text-left transition-all duration-700"]),ref:"devMsgDiv"},[v(m(a.devMsgContent.content)+" ",1),e("div",ze,[n(c,{class:"text-white text-lg cursor-pointer hover:text-primary-gray active:text-base transition duration-150",onClick:r.openDevMsg,icon:a.devOpen?"chevron-up":"chevron-down"},null,8,["onClick","icon"])])],2)]),e("div",Ae,[Ne,e("div",null,[e("div",Le,[n(b,{class:"rounded-full h-8 w-8",src:a.eval.authorAvatar},null,8,["src"]),e("div",qe,m(a.eval.author),1)]),e("div",Ee,[v(m(a.evalContent.content)+" ",1),He]),e("div",Re,[Qe,n(c,{icon:"chevron-right"})])])])]),n(I,{onSend:r.sendComment,modelValue:a.comment,"onUpdate:modelValue":o[1]||(o[1]=i=>a.comment=i),disable:a.commentState},null,8,["onSend","modelValue","disable"]),e("div",Je,[e("div",Ke,[We,(d(!0),p(V,null,D(a.hotComments,i=>(d(),U(M,{key:i.id,comment:i,"enable-min-h":!0,style:{width:"756px",height:"320px"},class:"text-primary-gray bg-light-dark bg-opacity-70 shadow-inner",onThumbsDown:(f,x)=>{i.thumbsDown=f,i.state=x},onThumbsUp:(f,x)=>{i.thumbsUp=f,i.state=x}},null,8,["comment","onThumbsDown","onThumbsUp"]))),128))]),e("div",Xe,[Ye,(d(!0),p(V,null,D(a.newestComments,i=>(d(),U(M,{key:i.id,comment:i,"img-unit":12,"enable-min-h":!1,onThumbsDown:(f,x)=>{i.thumbsDown=f,i.state=x},onThumbsUp:(f,x)=>{i.thumbsUp=f,i.state=x},style:{width:"520px"},class:"bg-light-dark text-primary-gray bg-opacity-70 shadow-inner"},null,8,["comment","onThumbsDown","onThumbsUp"]))),128))])])])}var nt=w(De,[["render",Ze],["__scopeId","data-v-79aefe59"]]);export{nt as default};
