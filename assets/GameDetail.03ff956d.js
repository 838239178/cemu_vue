var $=Object.defineProperty,z=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var P=(t,n,s)=>n in t?$(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,F=(t,n)=>{for(var s in n||(n={}))N.call(n,s)&&P(t,s,n[s]);if(B)for(var s of B(n))L.call(n,s)&&P(t,s,n[s]);return t},O=(t,n)=>z(t,A(n));import{_ as w,a as g}from"./index.8fa58a7e.js";import{r as l,o as r,c as p,a as e,t as m,b as a,d,g as v,F as V,f as D,u as U,y as T,A as I,n as y,w as q,e as E}from"./vendor.3b2a839d.js";import{A as H}from"./AnimNum.9ebbc689.js";const R={props:["data"]},Q={class:"text-left text-gray-200"},J=e("div",{class:"text-sm font-bold"},"\u6E38\u620F\u7B80\u4ECB:",-1),K={class:"wrap-text text-sm text-primary-gray leading-6 mt-2 mb-5 m",style:{"min-height":"5rem"}};function W(t,n,s,S,o,_){const c=l("el-descriptions-item"),h=l("el-tag"),b=l("el-descriptions");return r(),p("div",Q,[J,e("div",K,m(s.data.desc),1),a(b,{column:1,direction:"horizontal"},{default:d(()=>[a(c,{span:2,label:"\u53D1\u884C\u65E5\u671F:","label-class-name":"font-bold text-gray-200","class-name":"text-primary-gray underline"},{default:d(()=>[v(m(s.data.date),1)]),_:1}),a(c,{label:"\u51FA\u7248\u5546:",span:2,"label-class-name":"font-bold text-gray-200","class-name":"text-primary-gray underline"},{default:d(()=>[v(m(s.data.deployer),1)]),_:1}),a(c,{label:"\u53D1\u884C\u5546:",span:2,"label-class-name":"font-bold text-gray-200","class-name":"text-primary-gray underline"},{default:d(()=>[v(m(s.data.publisher),1)]),_:1}),a(c,{label:"\u6E38\u620F\u6807\u7B7E:",span:2,"label-class-name":"font-bold text-gray-200 ","class-name":"space-x-2"},{default:d(()=>[(r(!0),p(V,null,D(s.data.tags,u=>(r(),U(h,{key:u,color:"#BF1313",class:"text-gray-200 border-red-700",size:"mini"},{default:d(()=>[v(m(u),1)]),_:2},1024))),128))]),_:1})]),_:1})])}var X=w(R,[["render",W]]);const Y={props:["mediaScore","publicScore"]},Z=t=>(T("data-v-5c7301eb"),t=t(),I(),t),ee={class:"w-fit space-y-1"},te={class:"flex justify-between items-center w-80 h-32"},se={class:"bg-pub-score score"},ne={class:"bg-media-score score"},oe=Z(()=>e("div",{class:"flex justify-between items-center"},[e("span",{class:"score-title"},"\u5A92\u4F53\u603B\u8BC4"),e("span",{class:"score-title"},"\u73A9\u5BB6\u603B\u8BC4")],-1));function ae(t,n,s,S,o,_){const c=l("el-divider");return r(),p("div",ee,[e("div",te,[e("div",se,m(s.mediaScore),1),a(c,{direction:"vertical","content-position":"center",class:"h-36 bg-primary-gray"}),e("div",ne,m(s.publicScore),1)]),oe])}var le=w(Y,[["render",ae],["__scopeId","data-v-5c7301eb"]]);const ie={components:{AnimNum:H},emits:["thumbs-up","thumbs-down"],props:{comment:{default:()=>({id:8,gameId:2,score:6,username:"Qin",avatar:"https://media.st.dl.pinyuncloud.com/steamcommunity/public/images/avatars/9b/9b0d4b5213c802759546e82adf1d5fa8d9d2f6a8.jpg",content:"\u5982\u679C\u4F60\u60F3\u73A9\u7684\u591F\u723D\uFF0C\u9009\u5730\u5E73\u7EBF\u3002\u5982\u679C\u4F60\u60F3\u82B1\u91CC\u80E1\u54E8\uFF0C\u9009\u5730\u5E73\u7EBF\u3002\u5982\u679C\u4F60\u60F3\u6539\u88C5\u8C03\u6821\uFF0C\u9009\u5730\u5E73\u7EBF\u3002\u5982\u679C\u4F60\u60F3\u95EA\u9000\u6389\u7EBF\uFF0C\u9009\u5730\u5E73\u7EBF",thumbsUp:25,thumbsDown:1,date:"2021/11/09 13:01",state:0})},imgUnit:{default:()=>16},enableMinH:{default:()=>!0}},data(){return{rate:(this.comment.score/2).toFixed(1)}},methods:{setThumbs(t){t==-1?this.$emit("thumbs-down",this.comment.thumbsDown+1,t):this.$emit("thumbs-up",this.comment.thumbsUp+1,t)},formatThumbs(t){return`(${t})`}}},me=t=>(T("data-v-6ba40772"),t=t(),I(),t),ce={class:"h-full px-2 rounded-md"},re={class:"my-11 font-bold text-left text-sm"},de={class:"font-bold text-sm"},ue={class:"px-1 pb-2 wrap-text text-dark-white text-sm"},_e=me(()=>e("div",{class:"text-sm font-bold"},"\u4F60\u89C9\u5F97\u8FD9\u7BC7\u8BC4\u8BBA\u6709\u4EF7\u503C\u5417?",-1)),he={class:"float-left space-x-8 text-2xl mx-2"};function pe(t,n,s,S,o,_){const c=l("el-image"),h=l("el-col"),b=l("el-rate"),u=l("font-awesome-icon"),k=l("anim-num"),j=l("el-row");return r(),p("div",ce,[a(j,{align:"top",justify:"space-between"},{default:d(()=>[a(h,{span:4,offset:0},{default:d(()=>[a(c,{class:y([[`w-${s.imgUnit}`,`h-${s.imgUnit}`],"mx-auto my-10"]),style:{"box-shadow":"2px 2px 5px #171a21"},src:s.comment.avatar},null,8,["class","src"])]),_:1}),a(h,{span:3},{default:d(()=>[e("div",re,m(s.comment.username),1)]),_:1}),a(h,{span:17,class:"space-y-3 text-left px-4 py-6"},{default:d(()=>[a(b,{class:"text-base comment-rate",modelValue:o.rate,"onUpdate:modelValue":n[0]||(n[0]=G=>o.rate=G),disabled:"","allow-half":""},null,8,["modelValue"]),e("div",de,"\u53D1\u5E03\u4E8E "+m(s.comment.date),1),e("div",{class:y([s.enableMinH?"min-h-1/2":"","border-b-2 border-primary-gray"])},[e("div",ue,m(s.comment.content),1)],2),_e,e("div",he,[e("span",null,[e("button",{class:y(["border-none bg-none p-0 m-0",{"text-primary-red":s.comment.state==1}]),onClick:n[1]||(n[1]=()=>_.setThumbs(1))},[a(u,{class:"thumbs",icon:"thumbs-up"})],2),a(k,{class:"text-sm mx-1",value:s.comment.thumbsUp,round:1,formatValue:_.formatThumbs,duration:300,delay:30},null,8,["value","formatValue"])]),e("span",null,[e("button",{class:y(["border-none bg-none p-0 m-0",{"text-primary-red":s.comment.state==-1}]),onClick:n[2]||(n[2]=()=>_.setThumbs(-1))},[a(u,{class:"thumbs",icon:"thumbs-down"})],2),a(k,{class:"text-sm mx-1",value:s.comment.thumbsDown,round:1,formatValue:_.formatThumbs,duration:300,delay:30},null,8,["value","formatValue"])])])]),_:1})]),_:1})])}var be=w(ie,[["render",pe],["__scopeId","data-v-6ba40772"]]);const ve={emits:["send","update:modelValue"],props:{modelValue:Object,disable:{type:Boolean,default:()=>!1},bgClass:{default:()=>"bg-gradient-to-r from-light-dark to-primary-black bg-opacity-60"},user:{default:()=>({username:"LikeGhost",avatar:"https://avatars.githubusercontent.com/u/55338151?v=4"})}},watch:{modelValue(t){this.comment=t,this.comment.score/=2}},data(){return{comment:this.modelValue||{}}}},fe={class:"rounded"},xe={class:"mt-5 text-primary-gray font-semibold"},ge={class:"w-7/10"},ye={class:"text-xs text-gray-500 mb-2 text-left"},we={class:"flex justify-between items-end mt-5"},Ce=e("div",{class:"text-left text-xs text-gray-500 my-2"}," \u60A8\u5BF9\u8FD9\u6B3E\u6E38\u620F\u7684\u8BC4\u5206\u662F? ",-1);function Se(t,n,s,S,o,_){const c=l("el-image"),h=l("el-input"),b=l("el-rate");return r(),p("div",{class:y(["w-full px-10 pt-10 pb-3 flex justify-around items-start my-10 rounded-2xl shadow-inner",s.bgClass])},[e("div",fe,[a(c,{class:"w-32 h-32 rounded",style:{"box-shadow":"2px 2px 5px #171a21"},fit:"fill",src:s.user.avatar},null,8,["src"]),e("div",xe,m(s.user.username),1)]),e("div",ge,[e("div",ye,m(s.disable?`\u60A8\u5728 ${o.comment.date} \u8BC4\u4EF7\u4E86\u8FD9\u6B3E\u6E38\u620F`:"\u8BF7\u60A8\u63CF\u8FF0\u60A8\u5BF9\u8FD9\u6B3E\u6E38\u620F\u7684\u770B\u6CD5\uFF0C\u60A8\u7684\u53D1\u8A00\u9700\u8981\u9075\u5FAA\u793E\u533A\u89C4\u8303\uFF0C\u8BF7\u6CE8\u610F\u793C\u8C8C\u7528\u8BED"),1),a(h,{type:"textarea",disabled:s.disable,modelValue:o.comment.content,"onUpdate:modelValue":n[0]||(n[0]=u=>o.comment.content=u),class:"comment-sender",autosize:{minRows:6,maxRows:8}},null,8,["disabled","modelValue"]),e("div",we,[e("div",null,[Ce,a(b,{class:"comment-rate",modelValue:o.comment.score,"onUpdate:modelValue":n[1]||(n[1]=u=>o.comment.score=u),disabled:s.disable,"allow-half":"",colors:["#BF1313","#BF1313","#BF1313"]},null,8,["modelValue","disabled"])]),q(e("button",{class:"base-btn rounded-md my-3 h-fit",onClick:n[2]||(n[2]=u=>t.$emit("send",this.comment))},"\u53D1\u8868\u8BC4\u4EF7",512),[[E,!s.disable]])])])],2)}var ke=w(ve,[["render",Se]]);const Ve={components:{DetailPanel:X,ScorePanel:le,GameComment:be,CommentSender:ke},data(){return{game:{pics:[]},eval:{},evalContent:{},devMsg:{},devMsgContent:{},newestComments:[],hotComments:[],devOpen:!1,comment:{},commentState:!1}},mounted(){this.$route.query.id&&this.getGame(this.$route.query.id),this.eval=g.getGameEvalByGame(2),this.evalContent=g.getPostContent(this.eval.postId),this.devMsg=g.getDeveloperMessage(2),this.devMsgContent=g.getPostContent(this.devMsg.postId),this.newestComments=g.getGameComments(2).slice(4),this.hotComments=g.getGameComments(2).sort((t,n)=>n.thumbsUp-t.thumbsUp).slice(0,4)},methods:{getGame(t){this.game=g.getGameDateById(t),console.log(this.game)},onCarouselChange(t){this.$refs.gVideo.pause()},openDevMsg(){this.devOpen=!this.devOpen},sendComment(t){this.commentState=!0,t.score*=2,console.log(t.score),this.comment=O(F({},t),{thumbsUp:0,thumbsDown:0,username:"LikeGhost",avatar:"https://avatars.githubusercontent.com/u/55338151?v=4",date:"2021/12/06"}),this.newestComments.splice(0,0,this.comment),this.newestComments.pop()}}},C=t=>(T("data-v-44c5f382"),t=t(),I(),t),De={class:"mx-auto pt-8 mb-10 w-7/10"},Ue={class:"flex justify-between items-baseline w-full"},je={class:"text-left text-3xl text-gray-200 font-bold leading-10 my-8",style:{"text-shadow":"10px 10px 20px black"}},Ge=v(" \u8FDB\u5165\u8BBA\u575B "),Te={class:"flex justify-between items-center w-full"},Ie={style:{height:"337px",width:"600px"}},Me=["src","poster"],Be={style:{height:"337px",width:"674px"},class:"flex justify-around items-center space-x-6"},Pe={class:"flex justify-between items-center w-full"},Fe={style:{width:"600px"},class:"space-y-8"},Oe=C(()=>e("div",{class:"subtitle"},"\u5173\u4E8E\u8FD9\u6B3E\u6E38\u620F",-1)),$e={class:"absolute left-0 bottom-0 w-full text-center bg-gradient-to-t from-primary-black to-transparent"},ze={style:{width:"674px"},class:"space-y-8"},Ae=C(()=>e("div",{class:"subtitle"},"\u5A92\u4F53\u8BC4\u4EF7",-1)),Ne={class:"flex justify-start items-center space-x-4"},Le={class:"text-sm text-dark-white"},qe={class:"relative text-primary-gray w-full mt-4 wrap-text text-left",style:{"max-height":"6rem"}},Ee=C(()=>e("div",{class:"absolute left-0 bottom-0 w-full text-center bg-gradient-to-t from-primary-black to-transparent h-3"},null,-1)),He={class:"w-full text-right text-sm text-primary-gray mt-1 hover:text-white transition duration-200 cursor-pointer"},Re=v(" \u9605\u8BFB\u66F4\u591A.. "),Qe={class:"flex justify-between items-start w-full mt-6"},Je={class:"space-y-8",style:{width:"759px"}},Ke=C(()=>e("div",{class:"subtitle"},"\u6700\u6709\u4EF7\u503C\u7684\u8BC4\u8BBA",-1)),We={class:"space-y-8",style:{width:"520px"}},Xe=C(()=>e("div",{class:"subtitle"},"\u6700\u65B0\u8BC4\u8BBA",-1));function Ye(t,n,s,S,o,_){const c=l("font-awesome-icon"),h=l("el-carousel-item"),b=l("el-image"),u=l("el-carousel"),k=l("ScorePanel"),j=l("DetailPanel"),G=l("CommentSender"),M=l("GameComment");return r(),p("div",De,[e("div",Ue,[e("div",je,m(o.game.name),1),e("div",{class:"text-s2b font-semibold active:text-sm text-dark-white cursor-pointer hover:text-primary-red transition duration-200 bg-light-dark bg-opacity-40 px-4 py-2 rounded-2xl",onClick:n[0]||(n[0]=i=>t.$router.push(`/community?id=${o.game.id}`))},[Ge,a(c,{class:"text-primary-red",icon:"chevron-right"})])]),e("div",Te,[e("div",Ie,[a(u,{class:"shadow-lg","indicator-position":"outside",interval:15e3,onChange:_.onCarouselChange},{default:d(()=>[a(h,null,{default:d(()=>[e("video",{class:"w-full h-full",ref:"gVideo",controls:"",muted:"",src:o.game.media,poster:o.game.pics[0]},null,8,Me)]),_:1}),(r(!0),p(V,null,D(o.game.pics.slice(1),i=>(r(),U(h,{key:i},{default:d(()=>[a(b,{src:i,fit:"contain",lazy:!1},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["onChange"])]),e("div",Be,[a(k,{mediaScore:o.game.mediaScore,publicScore:o.game.publicScore},null,8,["mediaScore","publicScore"]),a(j,{data:o.game},null,8,["data"])])]),e("div",Pe,[e("div",Fe,[Oe,e("div",{class:y([o.devOpen?"devOpen":"devClose","relative w-full wrap-text text-primary-gray text-left transition-all duration-700"]),style:{"min-height":"10rem"},ref:"devMsgDiv"},[v(m(o.devMsgContent.content)+" ",1),e("div",$e,[a(c,{class:"text-white text-lg cursor-pointer hover:text-primary-gray active:text-base transition duration-150",onClick:_.openDevMsg,icon:o.devOpen?"chevron-up":"chevron-down"},null,8,["onClick","icon"])])],2)]),e("div",ze,[Ae,e("div",null,[e("div",Ne,[a(b,{class:"rounded-full h-8 w-8",src:o.eval.authorAvatar},null,8,["src"]),e("div",Le,m(o.eval.author),1)]),e("div",qe,[v(m(o.evalContent.content)+" ",1),Ee]),e("div",He,[Re,a(c,{icon:"chevron-right"})])])])]),a(G,{onSend:_.sendComment,modelValue:o.comment,"onUpdate:modelValue":n[1]||(n[1]=i=>o.comment=i),disable:o.commentState},null,8,["onSend","modelValue","disable"]),e("div",Qe,[e("div",Je,[Ke,(r(!0),p(V,null,D(o.hotComments,i=>(r(),U(M,{key:i.id,comment:i,"enable-min-h":!0,style:{width:"756px",height:"320px"},class:"text-primary-gray bg-light-dark bg-opacity-70 shadow-inner",onThumbsDown:(f,x)=>{i.thumbsDown=f,i.state=x},onThumbsUp:(f,x)=>{i.thumbsUp=f,i.state=x}},null,8,["comment","onThumbsDown","onThumbsUp"]))),128))]),e("div",We,[Xe,(r(!0),p(V,null,D(o.newestComments,i=>(r(),U(M,{key:i.id,comment:i,"img-unit":12,"enable-min-h":!1,onThumbsDown:(f,x)=>{i.thumbsDown=f,i.state=x},onThumbsUp:(f,x)=>{i.thumbsUp=f,i.state=x},style:{width:"520px"},class:"bg-light-dark text-primary-gray bg-opacity-70 shadow-inner"},null,8,["comment","onThumbsDown","onThumbsUp"]))),128))])])])}var nt=w(Ve,[["render",Ye],["__scopeId","data-v-44c5f382"]]);export{nt as default};
